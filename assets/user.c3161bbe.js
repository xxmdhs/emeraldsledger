import{d as e,r as a,n as r,k as t,p as n,s,v as l,o as u,l as o,u as i,e as p,t as d,K as f,a as v,w as b,F as c,b as m,c as k}from"./vendor.04540f29.js";import{g}from"./index.d83a0cab.js";const w={key:0},y=m("br",null,null,-1),T=["innerHTML"],h=["href"],L={key:1},C=e({props:{uid:{type:Number,required:!0}},setup(e){const C=e;let M=a(""),_=a(0),H=a(!1),U=a([]),j=r(C);function x(e){var a=new Date(1e3*e),r=a.getFullYear(),t=a.getMonth()+1,n=a.getDate(),s=a.getHours(),l=a.getMinutes();return r+"-"+D(t)+"-"+D(n)+" "+D(s)+":"+D(l)}function D(e){return e<10?"0"+e:String(e)}return t((()=>{n((async()=>{let e=await g(),a=[];for(const r in e)e[r].Uid!=String(j.uid.value)&&0!=j.uid.value||(M.value=e[r].Username,_.value+=e[r].Count,a.push(e[r]));0==j.uid.value?(H.value=!0,document.title="绿宝石列表"):document.title=`${M.value} 的绿宝石使用列表`,a.sort(((e,a)=>a.Time-e.Time));for(const r of a){let e=r;""==e.Link&&"mcbbsAd"==e.Type?e.v="none（宣传栏）":e.v="link",e.time=x(e.Time),U.value.push(e)}}))})),(a,r)=>{const t=s,n=l;return u(),o(c,null,[i(H)?f("",!0):(u(),o("p",w,[p(d(i(M))+"("+d(e.uid)+") ",1),y,p(" 总数： "+d(i(_)),1)])),v(n,{data:i(U)},{default:b((()=>[i(H)?(u(),k(t,{key:0,prop:"Uid",label:"uid"})):f("",!0),v(t,{prop:"Count",label:"绿宝石数",sortable:""}),v(t,{prop:"time",label:"时间",sortable:""}),v(t,{prop:"Cause",label:"原因"},{default:b((({row:e})=>[m("span",{innerHTML:e.Cause},null,8,T)])),_:1}),v(t,{label:"链接"},{default:b((e=>[e.row.Link?(u(),o("a",{key:0,href:e.row.Link,target:"_blank",referrerpolicy:"no-referrer"},d(e.row.v),9,h)):(u(),o("span",L,d(e.row.v),1))])),_:1})])),_:1},8,["data"])],64)}}});export{C as default};
