import{d as e,r as a,k as t,n as r,q as n,s,o as l,l as o,u,e as i,t as d,J as p,a as f,w as m,F as b,b as c,c as v,m as k}from"./vendor.4de80491.js";import{g}from"./index.8c37fbdf.js";const w={key:0},y=c("br",null,null,-1),T=["innerHTML"],U=["href"],_={key:1},h=e({props:{uid:{type:Number,required:!0}},setup(e){const h=e;let L=a(""),C=a(0),M=a(!1),H=a([]);function j(e){var a=new Date(1e3*e),t=a.getFullYear(),r=a.getMonth()+1,n=a.getDate(),s=a.getHours(),l=a.getMinutes();return t+"-"+q(r)+"-"+q(n)+" "+q(s)+":"+q(l)}function q(e){return e<10?"0"+e:String(e)}return t((()=>{r((()=>{!async function(e){let a=await g(),t=[];H.value=[];for(const r in a)a[r].Uid!=String(e)&&0!=e||(L.value=a[r].Username,C.value+=a[r].Count,t.push(a[r]));0==e?(M.value=!0,document.title="绿宝石列表"):document.title=`${L.value} 的绿宝石使用列表`;t.sort(((e,a)=>a.Time-e.Time));for(const r of t){let e=r;""==e.Link&&"mcbbsAd"==e.Type?e.v="none（宣传栏）":e.v="link",e.time=j(e.Time),H.value.push(e)}}(h.uid)}))})),(a,t)=>{const r=n,g=s;return l(),o(b,null,[u(M)?p("",!0):(l(),o("p",w,[i(d(u(L))+"("+d(e.uid)+") ",1),y,i(" 总数： "+d(u(C)),1)])),f(g,{data:u(H)},{default:m((()=>[u(M)?(l(),v(r,{key:0,prop:"Uid",label:"uid"},{default:m((({row:e})=>[f(u(k),{to:"/user/"+e.Uid},{default:m((()=>[i(d(e.Uid),1)])),_:2},1032,["to"])])),_:1})):p("",!0),u(M)?(l(),v(r,{key:1,prop:"Username",label:"用户名"})):p("",!0),f(r,{prop:"Count",label:"绿宝石数",sortable:""}),f(r,{prop:"time",label:"时间",sortable:""}),f(r,{prop:"Cause",label:"原因"},{default:m((({row:e})=>[c("span",{innerHTML:e.Cause},null,8,T)])),_:1}),f(r,{label:"链接"},{default:m((e=>[e.row.Link?(l(),o("a",{key:0,href:e.row.Link,target:"_blank",referrerpolicy:"no-referrer"},d(e.row.v),9,U)):(l(),o("span",_,d(e.row.v),1))])),_:1})])),_:1},8,["data"])],64)}}});export{h as default};
